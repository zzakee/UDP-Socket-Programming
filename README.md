# UDP 客户端-服务器应用 README

本项目实现了一个基于UDP的客户端-服务器通信模型。该模型支持数据包的发送与接收、丢包模拟、重传机制以及往返时间(RTT)的计算。以下是该项目的详细介绍和使用指南。

## 功能介绍

#### 客户端功能

- 发送特定格式的数据包到服务器。
- 支持数据包的重传机制。
- 计算并显示每个数据包的RTT。
- 显示发送与接收数据包的总数及丢包率。

#### 服务器功能

- 接收客户端发送的数据包，并根据设定的概率决定是否丢包。
- 对接收到的数据包回复响应，包含服务器当前时间和负载数据。
- 支持多线程处理，允许同时与多个客户端进行通信。

## 运行环境

- **操作系统**：兼容所有主要操作系统，包括 Windows, macOS, 和 Linux。
- **Python版本**：Python 3.x。确保您的系统中已安装Python 3及以上版本。
- **网络配置**：确保客户端与服务器之间的网络畅通，无防火墙或路由器阻挡UDP端口。

## 配置选项

- **丢包率**：服务器端预设了一个丢包率（LOSS_RATE），默认为 50%，您可以在 `server.py` 中调整此值以模拟不同网络环境的数据丢失情况。
- **端口和IP**：默认情况下，服务器监听在 `127.0.0.1:12345`。如需更改，可在 `server.py` 中调整 `HOST` 和 `PORT` 的值。
- **客户端连接参数**：客户端启动时需要指定服务器的IP地址和端口号，确保与服务器设置一致。

## 使用方法

1. **启动服务器**：
   - 打开命令行终端。
   - 转到包含 `server.py` 的目录。
   - 运行以下命令启动服务器：
     ```bash
     python server.py
     ```
   - 服务器将在默认的 `127.0.0.1:12345` 地址和端口上监听客户端的连接请求。

2. **启动客户端**：
   - 打开另一个命令行终端。
   - 转到包含 `client.py` 的目录。
   - 使用服务器的IP地址和端口号作为参数，运行以下命令启动客户端：
     ```bash
     python client.py <server_ip> <server_port>
     ```
   - 替换 `<server_ip>` 和 `<server_port>` 为服务器的IP地址和端口号。
   - 客户端将尝试连接到服务器，并在成功建立连接后发送数据包。

## 代码结构

- `client.py`：包含客户端逻辑的脚本。
- `server.py`：包含服务器逻辑的脚本。

## 数据包格式

#### 客户端发送的数据包格式

```bash
| sequence_number | version | type | length | payload |
|       2B        |    1B   |  1B  |   3B   |  196B   |
```

#### 服务器响应的数据包格式

```bash
| sequence_number | version | type | length | current_time | payload |
|       2B        |    1B   |  1B  |   3B   |       8B     |  188B   |
```

## 注意事项

- 在防火墙或路由器设置中，允许UDP流量通过指定的端口。
- 确保端口设置在客户端和服务器脚本中保持一致。



